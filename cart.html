<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cart — Ribbons & Balloons</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <div class="container topbar">
    <div class="brand"><div class="logo">R&B</div><div>Ribbons & Balloons</div></div>
    <nav>
      <a href="index.html">Home</a>
      <a href="cakes.html">Cakes</a>
      <a href="specials.html">Specials</a>
      <a href="stores.html">Stores</a>
      <a href="cart.html" class="active">Cart</a>
      <a href="checkout.html">Checkout</a>
      <a href="contact.html">Contact</a>
         <a href="#" id="logoutBtn">Logout</a>
    </nav>
  </div>
</header>

<main class="container">
  <h1>Your Cart</h1>
  <table class="cart-table" id="cartTable">
    <thead>
      <tr>
        <th>Item</th>
        <th>Price (₹)</th>
        <th>Quantity</th>
        <th>Subtotal (₹)</th>
        <th>Remove</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="cart-summary">
    <h3>Total: ₹<span id="cartTotal">0</span></h3>
    <button class="btn primary" onclick="goToCheckout()">Proceed to Checkout</button>
  </div>
</main>

<footer>
  <p>© <span id="year"></span> Ribbons & Balloons</p>
</footer>

<script>
document.getElementById("year").textContent = new Date().getFullYear();

function loadCart() {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let tbody = document.querySelector("#cartTable tbody");
  tbody.innerHTML = "";
  let total = 0;

  cart.forEach((item, index) => {
    let subtotal = item.price * item.qty;
    total += subtotal;

    let row = `
      <tr>
        <td>${item.name}</td>
        <td>${item.price}</td>
        <td>
          <input type="number" min="1" value="${item.qty}" onchange="updateQty(${index}, this.value)">
        </td>
        <td>${subtotal}</td>
        <td><button onclick="removeItem(${index})">X</button></td>
      </tr>
    `;
    tbody.innerHTML += row;
  });

  document.getElementById("cartTotal").textContent = total;
  localStorage.setItem("cartTotal", total); // Save total for checkout
}

function updateQty(index, qty) {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart[index].qty = parseInt(qty);
  localStorage.setItem("cart", JSON.stringify(cart));
  loadCart();
}

function removeItem(index) {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.splice(index, 1);
  localStorage.setItem("cart", JSON.stringify(cart));
  loadCart();
}

function goToCheckout() {
  window.location.href = "checkout.html";
}

loadCart();
</script>
</body>
</html>